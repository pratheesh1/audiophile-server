#!/usr/bin/env sh

# This script combines all the schema files into a single schema file (schema.prisma)

MESSAGE="// This is a generated file. Do not edit it manually.
\n// NOTE: DO NOT EDIT file 'schema.prisma' (Changes will be lost).
\n// Create a new model and run 'gen:schema' to generate 'schema.prisma' file.\n"

cd prisma
echo $MESSAGE >schema.prisma
cat config.prisma >>schema.prisma

DIRECTORY=./models

for file in $DIRECTORY/*.prisma; do
    echo "Importing $file into schema.prisma"
    cat $file >>schema.prisma
done

cd ..
npx prisma format
