// prisma/schema/product.prisma
model Category {
    id          Int       @id @default(autoincrement())
    name        String    @unique
    description String?
    Product     Product[]
    createdAt   DateTime  @default(now()) @map("created_at")
}

model Product {
    id              Int               @id @default(autoincrement())
    name            String
    description     String
    price           Float
    brand           String
    quantity        Int
    Category        Category          @relation(fields: [categoryId], references: [id])
    categoryId      Int               @map("category_id")
    ProductVariant  ProductVariant[]
    ProductProperty ProductProperty[]
    ProductImage    ProductImage[]
    sku             String            @unique
    createdAt       DateTime          @default(now()) @map("created_at")
    updatedAt       DateTime          @default(now()) @map("updated_at")
}

model ProductVariant {
    id                     Int                      @id @default(autoincrement())
    name                   String
    description            String?
    price                  Float
    quantity               Int
    Product                Product                  @relation(fields: [productId], references: [id])
    productId              Int                      @map("product_id")
    ProductVariantProperty ProductVariantProperty[]
    ProductVariantImage    ProductVariantImage[]
    sku                    String                   @unique
    createdAt              DateTime                 @default(now()) @map("created_at")
    updatedAt              DateTime                 @default(now()) @map("updated_at")
}

model Brand {
    id        Int      @id @default(autoincrement())
    name      String   @unique
    logoUri   String   @map("logo_uri")
    createdAt DateTime @default(now()) @map("created_at")
}

enum ProductPropertyType {
    TEXT
    NUMBER
    BOOLEAN
}

model ProductProperty {
    id          Int                 @id @default(autoincrement())
    name        String
    description String?
    Product     Product             @relation(fields: [productId], references: [id])
    productId   Int                 @map("product_id")
    type        ProductPropertyType @default(TEXT) @map("type")
    createdAt   DateTime            @default(now()) @map("created_at")
    updatedAt   DateTime            @default(now()) @map("updated_at")
}

model ProductImage {
    id        Int      @id @default(autoincrement())
    url       String
    Product   Product  @relation(fields: [productId], references: [id])
    productId Int      @map("product_id")
    createdAt DateTime @default(now()) @map("created_at")
    updatedAt DateTime @default(now()) @map("updated_at")
}

model ProductVariantProperty {
    id          Int                 @id @default(autoincrement())
    name        String
    description String?
    Product     ProductVariant      @relation(fields: [productId], references: [id])
    productId   Int                 @map("product_id")
    type        ProductPropertyType @default(TEXT) @map("type")
    createdAt   DateTime            @default(now()) @map("created_at")
    updatedAt   DateTime            @default(now()) @map("updated_at")
}

model ProductVariantImage {
    id        Int            @id @default(autoincrement())
    url       String
    Product   ProductVariant @relation(fields: [productId], references: [id])
    productId Int            @map("product_id")
    createdAt DateTime       @default(now()) @map("created_at")
    updatedAt DateTime       @default(now()) @map("updated_at")
}
